container system start
container run --name test -it --rm --memory 4G docker.io/nvidia/cuda:12.9.0-cudnn-devel-ubuntu24.04

# install base dependencies
apt-get update && \
DEBIAN_FRONTEND=noninteractive apt-get -qq -y install curl lsb-release lsb-release wget software-properties-common gnupg

# install llvm 19
curl -L -O https://apt.llvm.org/llvm.sh && \
chmod +x llvm.sh && \
./llvm.sh 19

# install layer 2 depdencncies
DEBIAN_FRONTEND=noninteractive apt-get -qq -y install git pkg-config libssl-dev libpolly-19-dev zlib1g-dev libzstd-dev

# install rust
curl -sSf -L https://sh.rustup.rs | bash -s -- -y --default-toolchain nightly-2025-03-02 --profile complete
export PATH="/root/.cargo/bin:${PATH}"

# clone + build repo
export LD_LIBRARY_PATH="/usr/local/cuda/nvvm/lib64:${LD_LIBRARY_PATH}"
export LLVM_LINK_STATIC=1
export RUST_LOG=debug
export RUSTC_LOG=debug

git clone https://github.com/brandonros/vanity-miner-rs.git && \
cd vanity-miner-rs/kernels && \
cargo build --release --verbose
